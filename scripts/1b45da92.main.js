var EtsyItems=Backbone.Model.extend({idAttribute:"_.id"}),EtsyItemsCollection=Backbone.Collection.extend({model:EtsyItems,url:"https://api.etsy.com/v2/listings/active.js?keywords=industrial%20chandelier%20lighting&order=most_relevant&includes=Images&api_key=kr9rjq7dc9c24jv6fccq2hus&callback=?",parse:function(a){return a.results}}),ListView=Backbone.View.extend({tagName:"a",className:"etsy-item col-sm-4",initialize:function(){this.setHref(),this.render(),$(".etsy-items").append(this.el),$(".etsy-item").click(function(){$(".show-modal").click(),console.log(".show-modal was clicked")})},renderedTemplate:_.template($("#etsy-item-template").text()),render:function(){this.$el.html(this.renderedTemplate(this.model))},setHref:function(){console.log("setHref has been invoked");var a=this.model.get("listing_id"),b="#/items/"+a;this.$el.attr({href:b})}}),MainView=Backbone.View.extend({className:"item-mainview",renderedTemplate:_.template($("#etsy-MainView-template").text()),initialize:function(){this.render(),$(".js-mainViewBox").html(this.el)},render:function(){this.$el.html(this.renderedTemplate(this.model))}}),MainRouter=Backbone.Router.extend({routes:{"":"showShops","#":"showShops",shops:"showShops","shops/:keyword":"showShops","shops/:keyword":"pushData","items/:itemId":"mainView"},initialize:function(){console.log("Hey dude, A router was just born!"),this.items=new EtsyItemsCollection,this.items.on("add",function(a){new ListView({model:a})}),console.log(this.items)},showShops:function(){console.log("showShops is being called by the router"),this.items.fetch()},pushData:function(a){a&&(this.items.url="https://api.etsy.com/v2/listings/active.js?keywords="+a+"&includes=Images&api_key=kr9rjq7dc9c24jv6fccq2hus&callback=?"),this.items.fetch();var b=this.items;console.log(b),savedData=new PricesCollection(b)},mainView:function(a){console.log("Should be seeing the larger view",this.items);var b=this.items.find(function(b){return console.log("Do you see it?"),b.get("listing_id")==a});new MainView({model:b})}});console.log("It is time to rumble."),$(document).ready(function(){router=new MainRouter,Backbone.history.start()});